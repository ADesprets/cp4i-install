apiVersion: v1
kind: Secret
metadata:
  name: cp4imq-secret
  namespace: cp4i
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvVENDQWVVQ0ZCeW1GS29HSzF3bm8yVDN4UVhsWkt2L3B4RTlNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1Cd3gKR2pBWUJnTlZCQU1URVdOekxXTmhMV05sY25ScFptbGpZWFJsTUI0WERUSTBNRFV5TXpFeE16VXhNVm9YRFRJNQpNRFV5TWpFeE16VXhNVm93V2pFTE1Ba0dBMVVFQmhNQ1JsSXhEREFLQmdOVkJBZ01BMGxFUmpFT01Bd0dBMVVFCkJ3d0ZVRUZTU1ZNeEVEQU9CZ05WQkFvTUIwSkZUa0ZEU0VreERUQUxCZ05WQkFzTUJGTkJRVVF4RERBS0JnTlYKQkFNTUEzTnlkakNDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFOZm12NFhBN0JRVgpLcjNadWtwVlR3UjF1UUo4RDg2alBsakZad29PUkdzUFp3WGxtUlgrV09NVjZQdVRtOTlMZFlNekhxM0N3T1JiClIxYVdwY0pjQzdPalhVM1ZFbDlQZ3hOcFRSVjUzTUw2eUtWVVFaZUxuQzV3UTBwaHV5TEw0eUIxajVKOWx0N0MKdDlRMUlEL0FuTXp5dVFKcDFpNzM4MG9EN2k5bnFiYlpyOGpBUk5JNE5UVlRwLzllZDkvbzduTlluRE42VXRCaQpKMEd3NWw1VlZLK01zVU9vckh0ZEtOV3JnMGNOSFJ0Nk9FVElrcDNEOHpsZWs5WEdXbndzcjFzWjZUcGs2NUlkClhTWGd2WmYwRU5EZU5FRjVwNndleElIcndiVUNzYkVJWnNVandGNjYxZ1Y4TW4yckNNQWdQbFdoRjFiREg5ekcKWVdnWWJBYUV4QjBDQXdFQUFUQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFSVmVYTS9nV2tjVXlscHhYYmx2Kwp6bTVBMy9ncUorYXE4U20xRGZQSHJLQjZQWURHWGVWOWlUM3NiU0VQNUxvWHV6L0UrUENOdDFPajNyam5PWWVCCmh5YldLb1R0OXZiSmNxTXQyQ09NUHdDVko2dGRITE1zZm16Tzl1THdaNFQ4RURWQnhyZjRTclhsZHo1SjFHekgKOU1CTEo0bHljVUdZcTJkRXpRZjRGQlEzNlZhODBlNkdJSkFUVGNiSER2V0l4S2dlejV6cktVeGhUVGtDVWk2UQo4ZUJ5ZTlObkNnWEU5OWkvcm9TZi8xS2c0ZFBMT3JvVFZabVNCUHVabWU5QzVLSHVqUEJtWkRseENUaExpK1hSClhsMGF6MjJiMFZWS0hrTVZtTnZsUkhpSUhOWmtnY1p0RE0vNGhkbWNpV2xXeHJyNWZ4T1BKdGN6NG1tNXlKWDEKWnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRRFg1citGd093VUZTcTkKMmJwS1ZVOEVkYmtDZkEvT296NVl4V2NLRGtSckQyY0Y1WmtWL2xqakZlajdrNXZmUzNXRE14NnR3c0RrVzBkVwpscVhDWEF1em8xMU4xUkpmVDRNVGFVMFZlZHpDK3NpbFZFR1hpNXd1Y0VOS1lic2l5K01nZFkrU2ZaYmV3cmZVCk5TQS93SnpNOHJrQ2FkWXU5L05LQSs0dlo2bTIyYS9Jd0VUU09EVTFVNmYvWG5mZjZPNXpXSnd6ZWxMUVlpZEIKc09aZVZWU3ZqTEZEcUt4N1hTalZxNE5IRFIwYmVqaEV5Sktkdy9NNVhwUFZ4bHA4TEs5YkdlazZaT3VTSFYwbAo0TDJYOUJEUTNqUkJlYWVzSHNTQjY4RzFBckd4Q0diRkk4QmV1dFlGZkRKOXF3akFJRDVWb1JkV3d4L2N4bUZvCkdHd0doTVFkQWdNQkFBRUNnZ0VBSDJPWXdHdjZNV05GeEdDd0ptMTlDdjRkNktxNzFrUkNqMnB5ZEJ6N1BTdDUKN3RBTGhUaVE3aGNQT1VCT2Z2K1JZQUtoem1FaHVvYm1KTVIxNktvME9LajRLdXJlL0c5cXlhV0dHUDRQZkE0MAo5MkI4RnM4cjVQa3Z0MVBsS1Z2R001VVQ5aGdwN3FJVnFFQnB1MkJ0WU80QVpacnQ1Njg4aTZ3WVNDNXZRZytOCjR3WEdNVTZUcndFb2lHcHltOHpydEpJc1dqRVFreFlJMnI5UTBUeHhaRGNMK25URnJQWVFwTVY2ZG9lOWNUZS8KM0tiNTNFMEhhUTFHd2s5UzdyRWF0VmVvN2xiRmJRblVUUzJqMkxvUzZCK1RjbVpkSWpLQnNwSWdJbWUrREswUQo5WWh2eTJnSUVTc291ZXg4YkpBd1JvK1drL2NxWXV0UFU2ZlZKZTB5U3dLQmdRRDlZMm0vVmdSay9aaEZyc2YwClh0SVo5T3JJMnk2S3k5R0N6N2NsL2NyODVtbWdqdzIvRFNXaENpcEJlVExtUEU4aGlLcjRBZk5sUWM3MTRRL3IKVGlmc1NJOS9mL1F2YStNdTJEdmV6TEV2OWxTVmkyRFRWcEl1Y0hGQ3dXVlRiWHE0MWpGMjl6eWZrOEhaaUlmNwpPZzVlUmNlQ2NsTEQ3WXVwRWdrNCtGZ2FFd0tCZ1FEYUlHd21ESVBhUGR5dmdQUnUvMTNhekkzNnRJdEdwNXZYCjQ2bG0zL25VM2xpaE9oQlUwZllYWVYvS240cGE5TXFxMi9DNG1WaUd2eFIvRUk4TWRvQ1JEUGdiUkFHdDJ6bEQKUVdPeWtIb1I2Y3lFeDdmazhodW1qdmt1T3pLMWlFcVdUaGVlbkVlQWRIWmNrSWVScXE3WmhIUjRZQlBhWk4rUgp1VVhuSTE5dkR3S0JnQ3VMN1QyTHk5K0xVYU1RSVo4V3VLYnJWM3BEYU9GRG0vTU9QWnlTM0ZMUVNuRGtoT2xECm1pYnQ5MHNmU0NjWFVFWWtGYlhmcC9QTDlvUjlORjR0SldGUEt4SXZiRWpHRXRvWElWcnQ5TG1ZYlByeVpDYU4KNXp1QjZZVWVkWXA3OHk1VzZWTlh0Qng4cVVENFhONUpJUFVFcXYvNUk4NDJRZDFCazBJdU0vM3ZBb0dBUXM4VgpjTjM2Y0pqc0JCRkNUTkVJaFNDTUNCTE9hZGlpWWhDSDdVdUNzTkZkWWh4dnJoc1UvZnBFSmNLUjFPUVBReC9VCmJpWUJ1RnZFUWxybkJaRXlOYnM4THRXNGtmQ0liSElWd0RhQ1BRUllNUDhlOHcrNHFsNDJNaFBOcDA1VVVnOGYKS3VTQS9mWXQzcElpQTlxOGJVRWxqMDBXSjVrbjVQRlRXTVU3MEw4Q2dZRUE0QjJ1Q2h5cXJYdFpETnFDSmVsYgozWmtMbWJKSVBHVUowcGVia1pJSTlxYXVLb2dOQ2FpQUJqYWMzRGMyck9xUGRNMExkSTZQeXpLVWx1eWRZSkdNCjh2V1p4UFpoSVFjU0w4RjFWajQrREFObEExZjMvSkFaTUE3KzVZNllSdTZzUlJSTG5wU09CVTZuUFpQN241Q3kKc2xuSk8yR05NRXZzNmlZKzVxZTQxejA9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lSQUttcExsWkhnYnM2a1p5KzNjTFdqR2d3RFFZSktvWklodmNOQVFFTEJRQXcKSERFYU1CZ0dBMVVFQXhNUlkzTXRZMkV0WTJWeWRHbG1hV05oZEdVd0hoY05NalF3TlRBMk1qSXhNakV6V2hjTgpNall3TlRBMk1qSXhNakV6V2pBY01Sb3dHQVlEVlFRREV4RmpjeTFqWVMxalpYSjBhV1pwWTJGMFpUQ0NBU0l3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFNQ0VlUVNEbEZZbWF0aEwvZDFNai9WSUQ3UFIKUDBJVklSU0xoWFlhU3VEOWxYb3RiczNOWXlCWDFzRWJueHdzbjBCNDVpWG85aFJrNkNpa0swNFBmbUU5ckNCMgpsTjBTNG5XSlZDd1gxRWdRSHpvdkhhRGpZK3Y0RUdWUFNCR21MVDlpb1lzTjNEaWNGQmpNYTJzSnFxRm9xSk11CkRmaEJjdnVQYmJISUVlNGo2cTREb0R2U2ZSNUl2ZkpWOGplMWgxeFh1TDlCdjF6TlpobG5VbkVJbFJuU0l0M0kKemp3VGdudUpYOC9zQ2lTNlQ4NlNsUkExWEFlUXRlbVNJMy8wWDJMVVZYSnFHM1h4YWlBVU1vL1ZvK3hsTkU3dQowcjgxdXBqdG9aaXVnL2RhZWFycWRNU2VGTzZKak5qOGR0UEtYd1d4Q0k4d1UwcTNxMDdXandpRVdkTUNBd0VBCkFhTkNNRUF3RGdZRFZSMFBBUUgvQkFRREFnS2tNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUUKRk5rdHVDMTUvV2dtcGsxU01NUTBqdXdNRU44ME1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQXZQSmF4bFJyNgpLREx3b1BCdmtYeDNDUGFvUUQvUGpUQ2IrT0FyeG5GcHoxd2ZEVUFNcjVLenlPcCt1WEk5NlE3RWRNc29EcUx0ClBmMkxqeEVKT2Q1SW5xeWFQM0FyaXBBWDRKalhNQnozeldxTTFZSmlyV2kzUm9rU2dzM3BuVVlpOEt3RmpXT0QKTnZoeHQ1TzFLMGNacU5tT2NWc01MNTNySC8yVTc1Vk9kcW9iYzRXTnlSeGVOWjBtRlJWQ3ZQaVA3ck1WYWtuaApBSTRpaDgvbnp6dzRWNTFlUnArY0Y3VFFvdCtXazBmQlVhcCtUSWR6YkdNZWNWdWN6S25mZk5jN1h4R0dGN01ICnlrKzNLbGp6UEs3TkFyZnJTRVNSOEhHUHl4K1VGVnhmL3lkZEFyYkVpaStRbVlSb1pLVWQ3N3YvdlZUekVUNFkKTkhTZUtNaEJ6SndwCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
type: kubernetes.io/tls
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: cp4imq-route
  namespace: cp4i
spec:
  host: cp4imqchl.chl.mq.ibm.com
  to:
    kind: Service
    name: cp4imq-ibm-mq
  port:
    targetPort: 1414
  tls:
    termination: passthrough
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cp4imq-mqsc-cm
  namespace: cp4i
data:
  cp4imq.mqsc: |
    DEFINE QLOCAL('Q1') REPLACE DEFPSIST(YES) 
    DEFINE CHANNEL('CP4IMQCHL') CHLTYPE(SVRCONN) REPLACE TRPTYPE(TCP) SSLCAUTH(OPTIONAL) SSLCIPH('ANY_TLS12_OR_HIGHER')
    SET CHLAUTH('CP4IMQCHL') TYPE(BLOCKUSER) USERLIST(NOBODY) ACTION(ADD)
---
apiVersion: mq.ibm.com/v1beta1
kind: QueueManager
metadata:
  name: cp4imq
  namespace: cp4i
spec:
  license:
    accept: true
    license: L-VTPK-22YZPK
    use: "NonProduction"
  pki:
    keys:
      - name: cp4imq
        secret:
          secretName: cp4imq-secret
          items:
            - tls.key
            - tls.crt
  queueManager:
    name: CP4IMQ
    resources:
      limits:
        cpu: 500m
      requests:
        cpu: 500m
    storage:
      queueManager:
        type: ephemeral
    availability:
      type: SingleInstance
    mqsc:
      - configMap:
          name: cp4imq-mqsc-cm
          items:
            - cp4imq.mqsc   
  template:
    pod:
      containers:
        - env:
            - name: MQSNOAUT
              value: 'yes'
          name: qmgr
  version: 9.3.5.1-r1
  web:
    enabled: true
